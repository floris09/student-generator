<script>

function promoteAdmin(id) {

  $.ajax({
    type: "PUT",
    url: "/users/" + id + ".json",
    data: JSON.stringify({
      user: { admin: true }
    }),
    contentType: "application/json",
    dataType: "json"
  });

}

function demoteAdmin(id) {

  $.ajax({
    type: "PUT",
    url: "/users/" + id + ".json",
    data: JSON.stringify({
      user: { admin: false }
    }),
    contentType: "application/json",
    dataType: "json"
  });

}


</script>

<h1 class="text-center">Matches</h1>

<h2 class="text-center">All users</h2>

<div class="col-xs-6 col-xs-offset-3">
  <% @users.order_by_admin.each do |user| %>
    <% if user.admin? %>
  <div class="row admin_row">
    <div class="col-xs-2 text-center">
      <h5 class="admin_tag">Admin</h5>
    </div>
    <div class="col-xs-4 text-center">
      <h5><%= user.email %></h5>
    </div>
    <div class="col-xs-6 text-left">
        <%= link_to admins_path do %> <div id="toggle-admin" onclick="demoteAdmin(<%=user.id%>)" class='btn btn-success admin_btn'>Demote from Admin</div> <% end %>
    </div>
  </div>
    <% elsif user.not_admin? %>
    <div class="row admin_row">
      <div class="col-xs-2 text-center">
        <h5 class="student_tag">Student</h5>
      </div>
      <div class="col-xs-4 text-center">
        <h5><%= user.email %></h5>
      </div>
      <div class="col-xs-6 text-left">
        <%= link_to admins_path do %> <div id="toggle-admin" onclick="promoteAdmin(<%=user.id%>)" class='btn btn-primary admin_btn'>Promote to Admin</div> <% end %>
      </div>
      </div>
    <% end %>
  <% end %>
</div>
