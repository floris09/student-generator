<script>

function promoteAdmin(id) {

  $.ajax({
    type: "PUT",
    url: "/users/" + id + ".json",
    data: JSON.stringify({
      user: { admin: true }
    }),
    contentType: "application/json",
    dataType: "json"
  });

}

function demoteAdmin(id) {

  $.ajax({
    type: "PUT",
    url: "/users/" + id + ".json",
    data: JSON.stringify({
      user: { admin: false }
    }),
    contentType: "application/json",
    dataType: "json"
  });

}


</script>

<h1 class="text-center">Matches</h1>

<div class="col-xs-6">
  <div class="text-center">
    <h3>All Users</h3>
  </div>
  <div class="inner_all">
    <% @users.order_by_admin.each do |user| %>
      <% if user.admin? %>
    <div class="row admin_row">
      <div class="col-xs-2 text-center">
        <h5 class="admin_tag">Admin</h5>
      </div>
      <div class="col-xs-4 text-center">
        <h5><%= user.email %></h5>
      </div>
      <div class="col-xs-6 text-left">
          <%= link_to admins_path do %> <div id="toggle-admin-<%=user.id%>" onclick="demoteAdmin(<%=user.id%>)" class='btn btn-success admin_btn'>Make Student</div> <% end %>
      </div>
    </div>
      <% elsif user.not_admin? %>
      <div class="row admin_row">
        <div class="col-xs-2 text-center">
          <h5 class="student_tag">Student</h5>
        </div>
        <div class="col-xs-4 text-center">
          <h5><%= user.email %></h5>
        </div>
        <div class="col-xs-6 text-left">
          <%= link_to admins_path do %> <div id="toggle-admin-<%=user.id%>" onclick="promoteAdmin(<%=user.id%>)" class='btn btn-primary student_btn'>Make Admin</div> <% end %>
        </div>
        </div>
      <% end %>
    <% end %>
  </div>

</div>

<div class="col-xs-3">
  <div class="text-center">
    <h3>Current Admins</h3>
  </div>
  <div class="inner_all">
    <% @users.order_by_admin.each do |user| %>
      <% if user.admin? %>
    <div class="row admin_row">
      <div class="col-xs-4 text-center">
        <h5 class="admin_tag">Admin</h5>
      </div>
      <div class="col-xs-8 text-left">
        <h5><%= user.email %></h5>
      </div>
    </div>
      <% end %>
    <% end %>
  </div>

</div>

<div class="col-xs-3">
  <div class="text-center">
    <h3>Current Students</h3>
  </div>
  <div class="inner_all">
    <% @users.order_by_admin.each do |user| %>
      <% if user.not_admin? %>
    <div class="row admin_row">
      <div class="col-xs-4 text-center">
        <h5 class="student_tag">Student</h5>
      </div>
      <div class="col-xs-8 text-left">
        <h5><%= user.email %></h5>
      </div>
    </div>
      <% end %>
    <% end %>
  </div>

</div>
